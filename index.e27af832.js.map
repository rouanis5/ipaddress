{"mappings":"imBAsBA,IAAAA,EACAC,mFArBA,IAAIC,EAAU,GAoBdF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,KAelCL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,wCCnBTE,EAAAC,QAAkBC,OAAmB,KAAOC,EAAA,SAAAC,QAA6C,UAAWC,MAAK,IAAMF,EAAc,cCA7HA,EAAA,SAAAG,SAA8CC,KAAKC,MAAM,oGCAzD,MAAMC,EAAMN,EAAA,aAgBZO,EAdA,SAAmBC,EAAKC,GACtBH,EAAIJ,MAAMQ,IACOA,EACRC,YACL,yFACK,IAAID,EAASE,IAAI,CACtBC,UAAW,MACXC,MAAO,qCACPC,OAAQ,CAACP,EAAKC,GACdO,KAAM,QCTZ,MAAMC,EAAMC,SAASC,eAAe,UAC9BC,EAAQF,SAASC,eAAe,aAChCE,EAAWH,SAASI,iBAAiB,aACrCC,EAAQ,GAkBdC,eAAeC,IACb,MAAMC,EAAKR,SAASC,eAAe,MAC7BQ,EAAWT,SAASC,eAAe,YACnCS,EAAWV,SAASC,eAAe,YACnCU,EAAMX,SAASC,eAAe,OAIpCD,SAASC,eAAe,OAAOW,UAAY,GAC3CJ,EAAGI,UAAY,GACfH,EAASG,UAAY,GACrBF,EAASE,UAAY,GACrBD,EAAIC,UAAY,GAChBT,EAASU,SAASC,IAChBA,EAAGC,UAAUC,OAAO,WAGtB,MAAMC,QAjCRX,eAAqBY,GACnB,MAAMV,EAAKU,EAELC,EAAWjC,KAAKkC,UAAU,IAAEZ,IAClC,GAAIH,EAAMc,GACR,OAAOd,EAAMc,GAGf,MAAME,EAAM,+FAA+Fb,IACrGc,QAAiBC,MAAMF,GACvBG,QAAeF,EAASG,OAG9B,OADApB,EAAMc,GAAYK,EACXA,EAoBYE,CAAMxB,EAAMyB,OAC/B,GAAkB,MAAdV,EAAKW,KAAc,CAGrB,MAAMC,EAASZ,EAAKT,GACdsB,EAAe,GAAGb,EAAKR,SAASsB,SAASd,EAAKR,SAASuB,WAAWf,EAAKR,SAASwB,WAChFC,EAAe,OAAOjB,EAAKR,SAASC,WACpCyB,EAAUlB,EAAKN,IAGrBT,EAAMyB,MAAQ,GACdxB,EAASU,SAASC,IAChBA,EAAGC,UAAUqB,IAAI,WAGnB5B,EAAGI,UAAYiB,EACfpB,EAASG,UAAYkB,EACrBpB,EAASE,UAAYsB,EACrBvB,EAAIC,UAAYuB,EAChB9C,EAAU4B,EAAKR,SAASnB,IAAK2B,EAAKR,SAASlB,UAE3CW,EAAMyB,MAAQ,GACdpB,IAIJR,EAAIsC,iBAAiB,SAAUC,IAC7BA,EAAEC,iBACFhC,WAGFiC,EAAejC,ECrEfkC,OAAOJ,iBAAiB,OAAQG","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-48b2477c35939de8.js","node_modules/@parcel/runtime-js/lib/runtime-f56b60c04d409dc6.js","src/js/map.js","src/js/handle.js","src/js/loading.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","module.exports = (__parcel__import__(\"./\" + require('./helpers/bundle-manifest').resolve(\"f7clq\"))).then(() => parcelRequire('f2WZf'));","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"ioUUD\\\":\\\"index.e27af832.js\\\",\\\"f7clq\\\":\\\"mapbox-gl.027771d5.js\\\"}\"));","const map = import('mapbox-gl');\n\nfunction updateMap(lng, lat) {\n  map.then((mapboxgl) => {\n    const mapbox = mapboxgl;\n    mapbox.accessToken =\n      'pk.eyJ1Ijoid2FuaXMiLCJhIjoiY2wyZGNtZGkwMDkwejNjbnN0MXJ0MjNvNSJ9.Udb0eEdEwQCVadG5PJcoIg';\n    return new mapboxgl.Map({\n      container: 'map', // container ID\n      style: 'mapbox://styles/mapbox/streets-v11', // style URL\n      center: [lng, lat], // starting position [lng, lat]\n      zoom: 9, // starting zoom\n    });\n  });\n}\n\nexport default updateMap;\n","import updateMap from './map';\n\nconst btn = document.getElementById('button');\nconst input = document.getElementById('ipaddress');\nconst skeleton = document.querySelectorAll('.skeleton');\nconst cache = {};\n\nasync function ipify(ipAddress) {\n  const ip = ipAddress;\n  // quick return from cache\n  const cacheKey = JSON.stringify({ ip });\n  if (cache[cacheKey]) {\n    return cache[cacheKey];\n  }\n\n  const url = `https://geo.ipify.org/api/v2/country,city?apiKey=at_4c3hq1BOKnOI0a6BCm0jaB0YpiNTj&ipAddress=${ip}`;\n  const response = await fetch(url);\n  const result = await response.json();\n\n  cache[cacheKey] = result; // store the result in cache\n  return result;\n}\n\nasync function fetchData() {\n  const ip = document.getElementById('ip');\n  const location = document.getElementById('location');\n  const timezone = document.getElementById('timezone');\n  const isp = document.getElementById('isp');\n\n  // before fetch\n  // remove data, map, enable skeleton text loading\n  document.getElementById('map').innerHTML = '';\n  ip.innerHTML = '';\n  location.innerHTML = '';\n  timezone.innerHTML = '';\n  isp.innerHTML = '';\n  skeleton.forEach((el) => {\n    el.classList.remove('hide');\n  });\n\n  const info = await ipify(input.value);\n  if (info.code !== 422) {\n    // after a success fetch\n    // get information\n    const ipText = info.ip; // ip = info.ip;\n    const locationText = `${info.location.city}, ${info.location.region}, ${info.location.country} `;\n    const timezoneText = `UTC ${info.location.timezone}`;\n    const ispText = info.isp;\n\n    // disable skeleton loading effect\n    input.value = '';\n    skeleton.forEach((el) => {\n      el.classList.add('hide');\n    });\n    // update information and map\n    ip.innerHTML = ipText;\n    location.innerHTML = locationText;\n    timezone.innerHTML = timezoneText;\n    isp.innerHTML = ispText;\n    updateMap(info.location.lng, info.location.lat);\n  } else {\n    input.value = '';\n    fetchData();\n  }\n}\n\nbtn.addEventListener('click', (e) => {\n  e.preventDefault();\n  fetchData();\n});\n\nexport default fetchData;\n","import fetchData from './handle';\n\nwindow.addEventListener('load', fetchData);\n"],"names":["$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","module","exports","import","parcelRequire","resolve","then","register","JSON","parse","$b464e8376c58de0c$var$map","$b464e8376c58de0c$export$2e2bcd8739ae039","lng","lat","mapboxgl","accessToken","Map","container","style","center","zoom","$7a39dab3e50d8a0a$var$btn","document","getElementById","$7a39dab3e50d8a0a$var$input","$7a39dab3e50d8a0a$var$skeleton","querySelectorAll","$7a39dab3e50d8a0a$var$cache","async","$7a39dab3e50d8a0a$var$fetchData","ip","location","timezone","isp","innerHTML","forEach","el","classList","remove","info","ipAddress","cacheKey","stringify","url","response","fetch","result","json","$7a39dab3e50d8a0a$var$ipify","value","code","ipText","locationText","city","region","country","timezoneText","ispText","add","addEventListener","e","preventDefault","$7a39dab3e50d8a0a$export$2e2bcd8739ae039","window"],"version":3,"file":"index.e27af832.js.map"}